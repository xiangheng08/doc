# 码元和码点

```js
const str = '😊👌🙌🤣🥱'

console.log(str.length); // 10
console.log(str[0]); // �
console.log(str.slice(1, 3)); // ��
console.log(str.slice(0, 2)); // 😊
```

在上面的代码中，str 是一个由 emoji 组成的字符串，你发向它的长度是 10，而不是 5，而输出第一个字符是一个乱码。

为什么呢？

这就得提到了**码元**和**码点**了。

在 js 中，字符是以 UTF-16 的格式存储的，也就是说，一个字符是 2 字节（0 ~  65535, 0x0000 ~ 0xffff），而一个码元就是 2 字节。但是 0 ~  65535 之间的码元并不能表示所有的字符，像 emoji 一般都是两个码元，而一个字符真正占用的空间就是码点。

知道这个概念后，我们知道一个码点对一个字符，但是一个码元不一定对应一个字符。所以，在 js 中，字符串的 length 属性返回的是码元的个数，而不是码点的个数。

而输出字符串的第一个字符，实际上是输出它的码点，所以输出的是乱码。第三个 log 是则是输出第一个字符的第二个码点和第二个字符第一个码点，所以是乱码。第四个 log 则是输出第一个字符的第一个码点和第二个字符的第一个码点，所以是正确的。

