# 瀑布流布局

<<< @/public/examples/frontend/layout/waterfall.html

## 效果

<mylink href="/examples/frontend/layout/waterfall.html">效果</mylink>

## 实现原理

首先，我们要知道瀑布流布局的特点：

1. 每个元素的宽度是固定的
2. 每个元素的高度是动态的

既然宽度是固定的，那么列数的就可以确定下来

列数计算公式：容器的宽度 / 元素的宽度在向下取整

间距计算公式：容器的宽度 - 元素的宽度 * 列数 + 1（使用 “列数 - 1” 就是没有两边的间距）

在代码中使用了 `cal` 函数来计算列数和间距。

知道列数了，我们就可以定义一个数组，数组的长度就是列数，数组中的元素就是每列的高度，开始填充 0 作为初始值。

然后循环容器的子元素，获取每个元素的高度，然后找到数组中的最小值，作为当前元素的 y 轴，然后把数组中对应位置的值加上这个元素的高度和间距。

更新容器的样式，设置高度为数组中的最大值。

最后给添加 `resize` 事件，当大小发生变化时，重新计算位置，记得做一下防抖。
